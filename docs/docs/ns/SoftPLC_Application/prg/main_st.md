# Traffic control simulator | [MAIN] | [NAMESPACES] | [METRICS] | [BACK]  

## Documentation for Program main  

```pascal
INTERFACE
    VAR
        vSequenceA : DINT; (**)
        TimerA : TOF; (**)
        vSequenceB : DINT; (**)
        TimerB : TOF; (**)
        Start : BOOL; (**)
        StartOld : BOOL; (**)
        vSequence : DINT; (**)
        TactTimer : TON; (**)
        vPeriodTime : TIME; (**)
        vElapsedTime : TIME; (**)
    END_VAR
END_INTERFACE
PROGRAM main:
    
TactTimer(IN:=TRUE, PT:=vPeriodTime, ET => vElapsedTime);
IF TactTimer.Q THEN
	TactTimer(IN:=FALSE);
END_IF
(* Direction Up, Down traffic light *)
gIO.Cross1CarU.RedLamp := vElapsedTime <= T#5S OR vElapsedTime >= T#37S AND vElapsedTime <= T#85S;
gIO.Cross1CarU.YellowLamp := vElapsedTime > T#3S AND vElapsedTime <= T#5S OR vElapsedTime >= T#35S AND vElapsedTime <= T#37S;
gIO.Cross1CarU.GreenLamp := vElapsedTime >= T#5S AND vElapsedTime <= T#35S;

(* Mirror the other side of the Up, Down direction *)
gIO.Cross1CarD := gIO.Cross1CarU;
gIO.Cross2CarD := gIO.Cross1CarU;
gIO.Cross2CarU := gIO.Cross1CarU;

(* Direction Left, Right traffic light *)
gIO.Cross1CarL.RedLamp := vElapsedTime >= T#0S AND vElapsedTime <= T#39S OR vElapsedTime >= T#71S AND vElapsedTime <= T#85S;
gIO.Cross1CarL.YellowLamp := vElapsedTime > T#37S AND vElapsedTime <= T#39S OR vElapsedTime >= T#69S AND vElapsedTime <= T#71S;
gIO.Cross1CarL.GreenLamp := vElapsedTime >= T#39S AND vElapsedTime <= T#69S;

(* Mirror the other side of the Left, Right direction *)
gIO.Cross1CarR := gIO.Cross1CarL;
gIO.Cross2CarR := gIO.Cross1CarL;
gIO.Cross2CarL := gIO.Cross1CarL;

(*Pedestrians*)
(*If left <-> right cars are going. Up <-> down pedestrians stop. Else go*)
IF gIO.Cross1CarL.GreenLamp OR gIO.Cross1CarL.YellowLamp  THEN
	gIO.Cross1PedLDU.RedLight := TRUE;
	gIO.Cross1PedLDU.GreenLight := FALSE;

ELSIF gIO.Cross1CarL.RedLamp THEN
	gIO.Cross1PedLDU.RedLight := FALSE;
	gIO.Cross1PedLDU.GreenLight := TRUE;
END_IF
(*Just copy all of the up and downs as they behave the same*)
gIO.Cross1PedLUD := gIO.Cross1PedLDU;
gIO.Cross1PedRUD := gIO.Cross1PedLDU;
gIO.Cross1PedRDU := gIO.Cross1PedLDU;
gIO.Cross2PedLDU := gIO.Cross1PedLDU;
gIO.Cross2PedLUD := gIO.Cross1PedLDU;
gIO.Cross2PedRUD := gIO.Cross1PedLDU;
gIO.Cross2PedRDU := gIO.Cross1PedLDU;

(*If up <-> Down cars are going. Left <-> right pedestrians stop. Else go*)
IF gIO.Cross1CarU.GreenLamp OR gIO.Cross1CarU.YellowLamp THEN
	gIO.Cross1PedULR.RedLight := TRUE;
	gIO.Cross1PedULR.GreenLight := FALSE;

ELSIF gIO.Cross1CarU.RedLamp THEN
	gIO.Cross1PedULR.RedLight := FALSE;
	gIO.Cross1PedULR.GreenLight := TRUE;
END_IF
(*Just copy all of the lefts and rights as they behave the same*)
gIO.Cross1PedURL := gIO.Cross1PedULR;
gIO.Cross1PedDLR := gIO.Cross1PedULR;
gIO.Cross1PedDRL := gIO.Cross1PedULR;
gIO.Cross2PedULR := gIO.Cross1PedULR;
gIO.Cross2PedURL := gIO.Cross1PedULR;
gIO.Cross2PedDLR := gIO.Cross1PedULR;
gIO.Cross2PedDRL := gIO.Cross1PedULR;
END_PROGRAM
```

## Metrics  

| VAR_IN | VAR_OUT | VAR_IN_OUT | VAR_LOCAL | VAR_EXTERNAL | VAR_GLOBAL | VAR_ACCESS | VAR_TEMP | Actions | Lines of code | Maintainable size |
| ------ | ------- | ---------- | --------- | ------------ | ---------- | ---------- | -------- | ------- | ------------- | ----------------- |
| 0 | 0 | 0 | 10 | 0 | 0 | 0 | 0 | 0 | 61 | 71 |  

---
Autogenerated with [ia_tools](https://github.com/tkucic/ia_tools)  

[MAIN]: ../../../../index_st.md
[NAMESPACES]: ../../nsList_st.md
[METRICS]: ../../../metrics_st.md
[BACK]: ../nsMain_st.md

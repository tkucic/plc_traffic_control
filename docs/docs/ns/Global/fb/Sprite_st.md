# Traffic control simulator | [MAIN] | [NAMESPACES] | [METRICS] | [BACK]  

## Documentation for Function block Sprite  

```pascal
INTERFACE
    VAR_INPUT
        init : SpriteDef_typ; (*Sprite initialization pars*)
        goTo : ARRAY[0..1] OF INT; (*Sprite moves to x,y destination*)
        moveX : INT; (*Moves the sprite by given ammount on the X axis*)
        moveY : INT; (*Moves the sprite by given ammount on the Y axis*)
    END_VAR
    VAR_OUTPUT
        x : INT; (*X position of the sprite*)
        y : INT; (*Y position of the sprite*)
        atDestination : BOOL; (*Flag to say it has arrived at its destination*)
        actX : INT; (*Actual position on the screen, X axis*)
        actY : INT; (*Actual position on the screen, Y axis*)
    END_VAR
    VAR
        vInit : BOOL := TRUE; (*Initialization flag*)
        vSpriteDef : SpriteDef_typ; (*Used sprite definition*)
        vActualX : INT; (*Actual position on the screen, X axis*)
        vActualY : INT; (*Actual position on the screen, Y axis*)
    END_VAR
END_INTERFACE
FUNCTION_BLOCK Sprite:
    (*Initialize sprite on first scan*)
    IF vInit THEN
    	vSpriteDef := init;
    	vInit := FALSE;
    END_IF

    (* Actual moving of the coordinates *)
    vSpriteDef.x := vSpriteDef.x + moveX;
    vSpriteDef.y := vSpriteDef.y + moveY;

    (* Reseting the position if sprite goes off screen *)
    (* If moving left to right *)
    IF vSpriteDef.x > vSpriteDef.screenWidth THEN
    	vSpriteDef.x := -vSpriteDef.width;
    (* If moving right to left *)
    ELSIF vSpriteDef.x < -vSpriteDef.width THEN
    	vSpriteDef.x := vSpriteDef.screenWidth;	
    END_IF
    (* If moving from up, down *)
    IF vSpriteDef.y > vSpriteDef.screenHeight THEN
    	vSpriteDef.y := -vSpriteDef.height;
    (* If moving from down, up *)
    ELSIF vSpriteDef.y < -vSpriteDef.height THEN
    	vSpriteDef.y := vSpriteDef.screenHeight;	
    END_IF

    (*x, y will be used to connect to absoulte movements of the graphic element*)
    x := vSpriteDef.x - init.x;
    y := vSpriteDef.y - init.y;

    (*ActX and ActY will be used in the logic for e.g. object collision detection*)
    actX := vSpriteDef.x;
    actY := vSpriteDef.y;
END_FUNCTION_BLOCK
```

## Metrics  

| VAR_IN | VAR_OUT | VAR_IN_OUT | VAR_LOCAL | VAR_EXTERNAL | VAR_TEMP |
| ------ | ------- | ---------- | --------- | ------------ | -------- |
| 4 | 5 | 0 | 4 | 0 | 0 |

| Actions | Lines of code | Maintainable size |
| ------- | ------------- | ----------------- |
| 0 | 33 | 55 |

---
Autogenerated with [ia_tools](https://github.com/tkucic/ia_tools)  

[MAIN]: ../../../../index_st.md
[NAMESPACES]: ../../nsList_st.md
[METRICS]: ../../../metrics_st.md
[BACK]: ../nsMain_st.md
